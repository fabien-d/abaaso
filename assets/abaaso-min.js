/**
 * Copyright (c) 2010 - 2012, Jason Mulligan <jason.mulligan@avoidwork.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of abaaso nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL JASON MULLIGAN BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * abaaso
 *
 * Events: init           Fires when abaaso is ready; register modules on this event
 *         ready          Fires when the DOM is available
 *         render         Fires when the window resources have loaded
 *         resize         Fires when the window resizes; parameter for listeners is abaaso.client.size
 *         afterCreate    Fires after an Element is created; parameter for listeners is the (new) Element
 *         afterDestroy   Fires after an Element is destroyed; parameter for listeners is the (removed) Element.id value
 *         beforeCreate   Fires when an Element is about to be created; parameter for listeners is the (new) Element.id value
 *         beforeDestroy  Fires when an Element is about to be destroyed; parameter for listeners is the (to be removed) Element
 *         error          Fires when an Error is caught; parameter for listeners is the logged Object (abaaso.error.log[n])
 *         hash           Fires when window.location.hash changes; parameter for listeners is the hash value
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @link http://abaaso.com/
 * @module abaaso
 * @version 1.8.7
 */
if(typeof $=="undefined")var $=null;if(typeof abaaso=="undefined")var abaaso=function(){"use strict";var a,b={cast:function(a,b){if(!d.safari&&typeof a!="object"||d.safari&&typeof a!="function")throw Error(j.error.expectedObject);b=b===!0;var c=[],e,f;switch(!0){case!isNaN(a.length):if(!d.ie||d.version>8)c=Array.prototype.slice.call(a);else for(e=0,f=a.length;e<f;e++)c.push(a[e]);break;default:for(e in a)c.push(b?e:a[e])}return c},clone:function(a){return o.clone(a)},contains:function(a,b){b.indexOf(",")>-1&&(b=b.explode());if(b instanceof Array){var c=[],d=args.length,e=null;for(e=0;e<d;e++)c[e]=a.index(b[e]);return c}return a.index(b)},diff:function(a,b){var c=a.length>b.length?a:b,d=c===a?b:a;return c.filter(function(a){if(d.indexOf(a)===-1)return!0})},first:function(a){return a[0]},index:function(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1},indexed:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]instanceof Array?a[b].indexed():a[b]);return c},intersect:function(a,b){var c=a.length>b.length?a:b,d=c===a?b:a;return c.filter(function(a){if(d.indexOf(a)>-1)return!0})},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&isNaN(b)&&c.push(b);return c},last:function(a){var b=a.length;return b>1?a[b-1]:a.first()},remove:function(a,b,c){if(typeof b=="string"){b=a.index(b);if(b===-1)return a}else b=b||0;var d=a.length,e=a.slice((c||b)+1||d);return a.length=b<0?d+b:b,a.push.apply(a,e),a},total:function(a){return a.indexed().length},toObject:function(a){var b={},c=a.length;while(c--)b[c.toString()]=a[c];return b}},c={items:{},clean:function(){var a;for(a in c.items)c.expired(a)&&c.expire(a)},expire:function(a,b){return b=b===!0,typeof c.items[a]!="undefined"?(delete c.items[a],b||a.fire("expire"),!0):!1},expired:function(a){var b=c.items[a];return typeof b!="undefined"&&typeof b.expires!="undefined"&&b.expires<new Date},get:function(a,b){return b=b!==!1,typeof c.items[a]=="undefined"?!1:b&&c.expired(a)?(c.expire(a),!1):c.items[a]},set:function(a,b,d){return typeof c.items[a]=="undefined"&&(c.items[a]={},c.items[a].permission=0),b==="permission"?c.items[a].permission|=d:b==="!permission"?c.items[a].permission&=~d:c.items[a][b]=d,c.items[a]}},d={android:function(){return typeof navigator!="undefined"&&/android/i.test(navigator.userAgent)}(),blackberry:function(){return typeof navigator!="undefined"&&/blackberry/i.test(navigator.userAgent)}(),chrome:function(){return typeof navigator!="undefined"&&/chrome/i.test(navigator.userAgent)}(),css3:function(){switch(!0){case this.mobile:case this.tablet:case this.chrome&&this.version>5:case this.firefox&&this.version>2:case this.ie&&this.version>8:case this.opera&&this.version>8:case this.safari&&this.version>4:return this.css3=!0,!0;default:return this.css3=!1,!1}},expire:0,firefox:function(){return typeof navigator!="undefined"&&/firefox/i.test(navigator.userAgent)}(),ie:function(){return typeof navigator!="undefined"&&/msie/i.test(navigator.userAgent)}(),ios:function(){return typeof navigator!="undefined"&&/ipad|iphone/i.test(navigator.userAgent)}(),linux:function(){return typeof navigator!="undefined"&&/linux|bsd|unix/i.test(navigator.userAgent)}(),mobile:function(){return typeof navigator!="undefined"&&/android|blackberry|ipad|iphone|meego|webos/i.test(navigator.userAgent)}(),playbook:function(){return typeof navigator!="undefined"&&/playbook/i.test(navigator.userAgent)}(),opera:function(){return typeof navigator!="undefined"&&/opera/i.test(navigator.userAgent)}(),osx:function(){return typeof navigator!="undefined"&&/macintosh/i.test(navigator.userAgent)}(),safari:function(){return typeof navigator!="undefined"&&/safari/i.test(navigator.userAgent.replace(/chrome.*/i,""))}(),server:function(){return typeof navigator=="undefined"}(),tablet:function(){abaaso.client.tablet=this.tablet=typeof navigator!="undefined"&&/android|ipad|playbook|webos/i.test(navigator.userAgent)&&(abaaso.client.size.x>=1e3||abaaso.client.size.y>=1e3)},webos:function(){return typeof navigator!="undefined"&&/webos/i.test(navigator.userAgent)}(),windows:function(){return typeof navigator!="undefined"&&/windows/i.test(navigator.userAgent)}(),version:function(){var a=0;switch(!0){case this.chrome:a=navigator.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:a=navigator.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:a=navigator.userAgent.replace(/(.*msie|;.*)/gi,"");break;case this.opera:a=navigator.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:a=navigator.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:a=typeof navigator!="undefined"?navigator.appVersion:0}return a=isNaN(parseInt(a))?0:parseInt(a),this.version=a,a},allows:function(a,b){try{if(a.isEmpty()||b.isEmpty())throw Error(j.error.invalidArguments);if(!c.get(a,!1))return undefined;b=b.toLowerCase();var d;switch(!0){case b==="delete":d=(a.permissions(b).bit&1)!==0;break;case b==="get":d=(a.permissions(b).bit&4)!==0;break;case/post|put/.test(b):d=(a.permissions(b).bit&2)!==0;break;default:d=!1}return d}catch(e){return r(e,arguments,this),undefined}},bit:function(a){var b=0;return a.each(function(a){switch(a.toLowerCase()){case"get":b|=4;break;case"post":case"put":b|=2;break;case"delete":b|=1}}),b},cors:function(a){return a.indexOf("//")>-1&&a.indexOf("//"+location.host)===-1},headers:function(b,e,f){var g=String(b.getAllResponseHeaders()).split("\n"),h={},i={},j=null,k=new Date,l,m;g.each(function(a){a.isEmpty()||(l=a.toString(),m=l.substr(l.indexOf(":")+1,l.length).replace(/\s/,""),l=l.substr(0,l.indexOf(":")).replace(/\s/,""),h[l]=m,/allow|access-control-allow-methods/i.test(l)&&(j=m))});switch(!0){case typeof h["Cache-Control"]!="undefined"&&/no/.test(h["Cache-Control"]):case typeof h.Pragma!="undefined"&&/no/.test(h.Pragma):break;case typeof h["Cache-Control"]!="undefined"&&/\d/.test(h["Cache-Control"]):k=k.setSeconds(k.getSeconds()+parseInt(/\d{1,}/.exec(h["Cache-Control"])[0]));break;case typeof h.Expires!="undefined":k=new Date(h.Expires);break;default:k=k.setSeconds(k.getSeconds()+a.expires)}return i.expires=k,i.headers=h,i.permission=d.bit(j!==null?j.explode():[f]),f!=="head"&&(c.set(e,"expires",i.expires),c.set(e,"headers",i.headers),c.set(e,"permission",i.permission)),i},permissions:function(a){var b=c.get(a,!1),d=b?b.permission:0,e={allows:[],bit:d,map:{read:4,write:2,"delete":1}};return d&1&&e.allows.push("DELETE"),d&2&&function(){e.allows.push("PUT"),e.allows.push("PUT")}(),d&4&&e.allows.push("GET"),e},jsonp:function(b,c,d,e){var f=(new String(b)).toString(),h=o.guid(!0),i,j,k;switch(!0){case typeof e=="undefined":case e===null:case e instanceof Object&&(e.callback===null||typeof e.callback=="undefined"):case typeof e=="string"&&e.isEmpty():i="callback";break;case e instanceof Object&&typeof e.callback!="undefined":i=e.callback;break;default:i="callback"}f=f.replace(i+"=?",""),f.on("failedGet",function(){this.un("failedGet",h).on("afterJSONP",function(a){this.un("afterJSONP",h).un("failedJSONP",h),typeof c=="function"&&c(a)},h).on("failedJSONP",function(){this.un("afterJSONP",h).un("failedJSONP",h),typeof d=="function"&&d()},h);do j=o.genId().slice(0,10);while(typeof abaaso.callback[j]!="undefined");b=b.replace(i+"=?",i+"=abaaso.callback."+j),abaaso.callback[j]=function(b){a.destroy(k),clearTimeout(abaaso.timer[j]),delete abaaso.timer[j],delete abaaso.callback[j],f.fire("afterJSONP",b)},k=g.create("script",{src:b,type:"text/javascript"},a("head")[0]),abaaso.timer[j]=setTimeout(function(){f.fire("failedJSONP")},3e4)},h);switch(!0){case e instanceof Object&&typeof e.Accept=="undefined":e.Accept="application/json";case e instanceof Object&&typeof e.Accept!="undefined":break;default:e={Accept:"application/json"}}return f.get(c,d,e)},request:function(a,b,e,f,g){try{if(/post|put/i.test(b)&&typeof g=="undefined")throw Error(j.error.invalidArguments);b=b.toLowerCase();var h=document.location,k=d.cors(a),l=d.ie&&d.version<10&&k&&b==="get"?new XDomainRequest:new XMLHttpRequest,m=/post|put/i.test(b)?g:null,n=b==="get"&&g instanceof Object?g:null,p=b==="head"?!1:c.get(a),s=b.capitalize(),t=o.guid(!0),u,v,w;v=function(){clearTimeout(abaaso.timer[s+"-"+a]),delete abaaso.timer[s+"-"+a],a.un("received"+s,t).un("timeout"+s,t)},w=function(){a.fire("failed"+s,t).un("failed"+s,t)},b==="delete"&&a.on("afterDelete",function(){c.expire(a),a.un("afterDelete",t)},t),a.on("received"+s,v,t).on("timeout"+s,function(){v(),w()},t).on("after"+s,function(b){a.un("received"+s,t).un("timeout"+s,t).un("after"+s,t).un("failed"+s,t),typeof e=="function"&&e(b)},t).on("failed"+s,function(){v(),a.un("after"+s,t).un("failed"+s,t),typeof f=="function"&&f()},t).fire("before"+s).fire("beforeXHR");if(b!=="head"&&a.allows(b)===!1)return v(),a.fire("failed"+s),a;if(b==="get"&&Boolean(p))a.fire("afterGet",o.clone(p.response));else{abaaso.timer[s+"-"+a]=setTimeout(function(){a.fire("timeout"+s)},3e4),l[k&&d.ie?"onload":"onreadystatechange"]=function(){d.response(l,a,b)};if(d.ie&&k&&d.version<=9)if(h.protocol==="http:")l.open(b.toUpperCase(),a);else return a.fire("failed"+s);else l.open(b.toUpperCase(),a,!0);if(m!==null)switch(!0){case typeof m.xml!="undefined":m=m.xml;case m instanceof Document:m=q.decode(m);case typeof m=="string"&&/<[^>]+>[^<]*]+>/.test(m):typeof l.setRequestHeader!="undefined"&&l.setRequestHeader("Content-type","application/xml");break;case m instanceof Object:typeof l.setRequestHeader!="undefined"&&l.setRequestHeader("Content-type","application/json"),m=i.encode(m);break;default:typeof l.setRequestHeader!="undefined"&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8")}if(typeof l.setRequestHeader!="undefined"){n instanceof Object&&(typeof n.callback!="undefined"&&delete n.callback,typeof n.withCredentials!="undefined"&&delete n.withCredentials);if(n!==null)for(u in n)l.setRequestHeader(u,n[u]);typeof p=="object"&&typeof p.headers.ETag!="undefined"&&l.setRequestHeader("ETag",p.headers.ETag)}typeof l.withCredentials=="boolean"&&g instanceof Object&&typeof g.withCredentials=="boolean"&&(l.withCredentials=g.withCredentials),typeof l.onprogress=="object"&&(l.onprogress=function(b){a.fire("progress"+s,b)}),l.send(m)}return a}catch(x){return r(x,arguments,this),undefined}},response:function(a,b,e){try{var f=e.toLowerCase().capitalize(),g=document.location;switch(!0){case a.readyState===2:b.fire("received"+f);break;case a.readyState===4:switch(a.status){case 200:case 204:case 205:case 301:var h=null,k=abaaso.state,l=d.headers(a,b,e),m,n,p;b.fire("afterXHR");if(e==="head")return b.fire("afterHead",l.headers);if(e!=="delete"&&/200|301/.test(a.status)){n=typeof l.headers["Content-Type"]!="undefined"?l.headers["Content-Type"]:"";switch(!0){case(/json|plain/.test(n)||n.isEmpty())&&Boolean(p=i.decode(/[\{\[].*[\}\]]/.exec(a.responseText))):m=p;break;case/xml/.test(n)&&String(a.responseText).isEmpty()&&a.responseXML!==null:m=q.decode(typeof a.responseXML.xml!="undefined"?a.responseXML.xml:a.responseXML);break;case/<[^>]+>[^<]*]+>/.test(a.responseText):m=q.decode(a.responseText);break;default:m=a.responseText}if(typeof m=="undefined")throw Error(j.error.serverError);c.set(b,"response",l.response=m)}k.header!==null&&Boolean(h=l.headers[k.header])&&k.current!==h&&(typeof k.change=="function"?k.change(h):k.current=h);switch(a.status){case 200:b.fire("after"+f,o.clone(l.response));break;case 205:b.fire("reset");break;case 301:b.fire("moved",l.response)}break;case 401:throw Error(j.error.serverUnauthorized);case 403:throw c.set(b,"!permission",d.bit(e)),Error(j.error.serverForbidden);case 405:throw c.set(b,"!permission",d.bit(e)),Error(j.error.serverInvalidMethod);case 0:b.fire("failed"+f);break;default:throw Error(j.error.serverError)}break;case d.ie&&d.cors(b)&&f==="Get":var m,p;switch(!0){case Boolean(p=i.decode(/[\{\[].*[\}\]]/.exec(a.responseText))):m=p;break;case/<[^>]+>[^<]*]+>/.test(a.responseText):m=q.decode(a.responseText);break;default:m=a.responseText}c.set(b,"permission",d.bit(["get"])),c.set(b,"response",m),b.fire("afterGet",m)}}catch(s){r(s,arguments,this,!0),b.fire("failed"+f)}return b},size:function(){var a=0,b=0;return d.server||(a=typeof document.documentElement!="undefined"?document.documentElement.clientWidth:document.body.clientWidth,b=typeof document.documentElement!="undefined"?document.documentElement.clientHeight:document.body.clientHeight),{x:a,y:b}}},e={expire:function(a){return typeof this.get(a)!="undefined"&&this.set(a,"","-1s"),a},get:function(a){return this.list()[a]},list:function(){var a={},b,c;return!d.server&&typeof document.cookie!="undefined"&&!document.cookie.isEmpty()&&(c=document.cookie.split(";"),c.each(function(c){b=c.split("="),a[decodeURIComponent(b[0].toString().trim())]=decodeURIComponent(b[1].toString().trim())})),a},set:function(a,b,c){c=c.toString()||"";var d="",e=null,f=null,g=["d","h","m","s"],h=g.length;if(!c.isEmpty()){while(h--)if((new RegExp(g[h])).test(c)){f=g[h],e=parseInt(c);break}if(isNaN(e))throw Error(j.error.invalidArguments);d=new Date;switch(f){case"d":d.setDate(d.getDate()+e);break;case"h":d.setHours(d.getHours()+e);break;case"m":d.setMinutes(d.getMinutes()+e);break;case"s":d.setSeconds(d.getSeconds()+e)}}return d.isEmpty()||(d="; expires="+d.toUTCString()),document.cookie=a.toString().trim()+"="+b+d+"; path=/",this.get(a)}},f={methods:{batch:function(a,b,c){try{a=a.toString().toLowerCase()||undefined,c=c===!0;if(!/^(set|del)$/.test(a)||typeof b!="object")throw Error(j.error.invalidArguments);var d=this.parentNode,e,f,g;d.fire("beforeDataBatch"),c&&this.clear(!0);if(b instanceof Array)for(e=0,f=b.length;e<f;e++)a==="set"?(this.key!==null&&typeof b[e][this.key]!="undefined"?(g=b[e][this.key],delete b[e][this.key]):g=e.toString(),this.set(g,b[e],c)):this.del(b[e],!1,c);else for(e in b)a==="set"?(this.key!==null&&typeof b[e][this.key]!="undefined"?(g=b[e][this.key],delete b[e][this.key]):g=e.toString(),this.set(g,b[e],c)):this.del(b[e],!1,c);return a==="del"&&this.reindex(),d.fire("afterDataBatch"),this}catch(h){return r(h,arguments,this),undefined}},clear:function(a){a=a===!0;var b=this.parentNode;return a?(this.keys={},this.records=[],this.total=0,this.views={}):(b.fire("beforeDataClear"),this.callback=null,this.credentials=null,this.expires=null,this._expires=null,this.key=null,this.keys={},this.records=[],this.source=null,this.total=0,this.views={},this.uri=null,this._uri=null,b.fire("afterDataClear")),this},del:function(a,b,c){if(typeof a=="undefined"||typeof a!="number"&&typeof a!="string")throw Error(j.error.invalidArguments);b=b!==!1,c=c===!0;var d=this.parentNode,e={},f=new RegExp("true|undefined"),g,h,i;switch(typeof a){case"string":g=a,a=this.keys[g];if(typeof g=="undefined")throw Error(j.error.invalidArguments);a=a.index;break;default:g=this.records[a];if(typeof g=="undefined")throw Error(j.error.invalidArguments);g=g.key}h={key:g,record:a,reindex:b},this.uri!==null&&(i=this.uri+"/"+g,e.uri=i.allows("delete"),e.data=this.uri.allows("delete")),d.fire("beforeDataDelete",h);switch(!0){case c:case this.uri===null:d.fire("syncDataDelete",h);break;case f.test(e.data)&&f.test(e.uri):i.del(function(){d.fire("syncDataDelete",h)},function(){d.fire("failedDataDelete",h)});break;default:d.fire("failedDataDelete",h)}return this},find:function(a,b){try{if(typeof a=="undefined")throw Error(j.error.invalidArguments);var c=[],d=typeof a=="string"?a.explode():a,e=[],f,g=d.length,h=this.parentNode,i={},k,l,m,n,o,p,q,s;h.fire("beforeDataFind"),n=this.records.first();switch(!0){case typeof b=="string":c=b.explode(),q=c.length;while(q--)if(!n.data.hasOwnProperty(c[q]))throw Error(j.error.invalidArguments);break;default:for(q in n.data)c.push(q)}f=c.length,s=this.total;for(q=0;q<s;q++)for(k=0;k<f;k++)for(l=0;l<g;l++)m=c[k],p=d[l],n=new RegExp(p,"gi"),o=this.records[q].data[m],!i[this.records[q].key]&&n.test(o)&&(i[this.records[q].key]=q,e.push(this.records[q]));return h.fire("afterDataFind",i),e}catch(t){return r(t,arguments,this),undefined}},form:function(b,c,d){try{var e=b===null,f=this,h,i,k,l,m,n;switch(!0){case e:b=this.get(0);break;case!(b instanceof Object):b=this.get(b)}switch(!0){case typeof b=="undefined":throw Error(j.error.invalidArguments);case this.uri!==null&&!this.uri.allows("post"):throw Error(j.error.serverInvalidMethod)}return m=b.key,n=b.data,typeof c!="undefined"&&(c=o.object(c)),h=this.uri.replace(/.*\//,"").replace(/\?.*/,""),h.isDomain()&&(h=h.replace(/\..*/g,"")),k=function(b){var c=b.srcElement.parentNode,e=a("#"+c.id+" input"),g=e[0].name.match(/(.*)\[/)[1],h=!0,i={};f.parentNode.fire("beforeDataFormSubmit"),d&&(h=c.validate());switch(h){case!1:f.parentNode.fire("failedDataFormSubmit");break;case!0:e.each(function(a){o.define(a.name.replace("[",".").replace("]",""),a.value,i)}),f.set(m,i[g])}f.parentNode.fire("afterDataFormSubmit",m)},l=function(a,b,c){var d,f,g;for(d in a)switch(!0){case a[d]instanceof Array:f=0,a[d].each(function(a){l(a,b,c+"["+d+"]["+f++ +"]")});break;case a[d]instanceof Object:l(a[d],b,c+"["+d+"]");break;default:g=(c+"["+d+"]").replace(/\[|\]/g,""),b.create("label",{"for":g}).html(d.capitalize()),b.create("input",{id:g,name:c+"["+d+"]",type:"text",value:e?"":a[d]})}},this.parentNode.fire("beforeDataForm"),i=g.create("form",{style:"display:none;"},c),l(n,i,h),i.create("input",{type:"button",value:j.common.submit}).on("click",function(a){k(a)}),i.create("input",{type:"reset",value:j.common.reset}),i.css("display","inherit"),this.parentNode.fire("afterDataForm",i),i}catch(p){return r(p,arguments,this),undefined}},get:function(a){var b=[],c=this.parentNode,d,e,f;c.fire("beforeDataGet");switch(!0){case typeof a=="undefined"||String(a).length===0:b=[],this.records.each(function(a){b.push(o.clone(a))});break;case typeof a=="string"&&typeof this.keys[a]!="undefined":b=o.clone(this.records[this.keys[a].index]);break;case typeof a=="number":b=o.clone(this.records[a]);break;case a instanceof Array:if(!!isNaN(a[0])||!!isNaN(a[1]))throw Error(j.error.invalidArguments);e=a[0]-1,f=a[1]-1;for(d=e;d<f;d++)typeof this.records[d]!="undefined"&&b.push(o.clone(this.records[d]));break;default:b=undefined}return c.fire("afterDataGet",b),b},reindex:function(){var a=this.total,b=this.parentNode,c;b.fire("beforeDataReindex"),this.views={};for(c=0;c<a;c++)this.records[c].key.isNumber()&&(delete this.keys[this.records[c].key],this.keys[c.toString()]={},this.records[c].key=c.toString()),this.keys[this.records[c].key].index=c;return b.fire("afterDataReindex"),this},set:function(a,b,c){a=a===null?undefined:a.toString(),c=c===!0;switch(!0){case(typeof a=="undefined"||a.isEmpty())&&this.uri===null:case typeof b=="undefined":case b instanceof Array:case b instanceof Number:case b instanceof String:case typeof b!="object":throw Error(j.error.invalidArguments)}var d=typeof this.keys[a]=="undefined"&&typeof this.records[a]=="undefined"?undefined:this.get(a),e=this.parentNode,f=typeof a=="undefined"?"post":"put",g={data:b,key:a,record:undefined},h=this.uri===null?null:this.uri+"/"+a,i={},k=new RegExp("true|undefined");typeof d!="undefined"&&(g.record=this.records[this.keys[d.key].index]),h!==null&&(i.uri=h.allows(f),i.data=this.uri.allows(f)),e.fire("beforeDataSet");switch(!0){case c:case this.uri===null:e.fire("syncDataSet",g);break;case k.test(i.data)&&k.test(i.uri):h[f](function(a){g.result=a,e.fire("syncDataSet",g)},function(){e.fire("failedDataSet")},b);break;default:e.fire("failedDataSet",g)}return this},sort:function(a,b){try{if(typeof a=="undefined"||String(a).isEmpty())throw Error(j.error.invalidArguments);b=b===!0;var c=this.parentNode,d=a.toCamelCase().replace(/Asc$/,""),e=[],f=[],g,h,i,k;if(!b&&this.views[d]instanceof Array)return this.views[d];if(this.total===0)return this.records;h=new RegExp("\\s+desc","i"),g=a.replace(/\s.*$/,"");if(!this.records[0].data.hasOwnProperty(g))throw Error(j.error.invalidArguments);return c.fire("beforeDataSort"),this.records.each(function(a){i=String(a.data[g]).trim()+":::"+a.key,e.push(i)}),e.sort(),h.test(a)&&e.reverse(),g=new RegExp(":::(.*)$"),e.each(function(a){k=c.data.keys[g.exec(a)[1]].index,f.push(c.data.records[k])}),this.views[d]=f,c.fire("afterDataSort",d),f}catch(l){return r(l,arguments,this),undefined}},sync:function(a){try{if(this.uri===null||this.uri.isEmpty())throw Error(j.error.invalidArguments);a=a===!0;var b=this,c=b.parentNode,d=o.guid(!0),e,f;return e=function(d){try{if(typeof d!="object")throw Error(j.error.expectedObject);var e,f=[];b.source!==null&&typeof d[b.source]!="undefined"&&(d=d[b.source]);if(d instanceof Array)f=d;else for(e in d)if(d[e]instanceof Array){f=f.concat(d[e]);break}b.batch("set",f,!0),a&&b.reindex(),c.fire("afterDataSync",d)}catch(g){r(g,arguments,this),c.fire("failedDataSync")}},f=function(){c.fire("failedDataSync")},c.fire("beforeDataSync"),this.uri.jsonp(e,f,{callback:this.callback,withCredentials:this.credentials}),this}catch(g){return r(g,arguments,this),this}}},register:function(e,f){if(e instanceof Array)return e.each(function(a){f.register(a,f)});var g={expires:{getter:function(){return this._expires},setter:function(b){try{if(this.uri===null||b!==null&&(isNaN(b)||typeof b=="boolean"))throw Error(j.error.invalidArguments);if(this._expires===b)return;this._expires=b;var d=this.parentNode.id+"DataExpire",e=this.expires,f=this.uri;b===null?(clearTimeout(a.repeating[d]),delete a.repeating[d]):a.defer(function(){a.repeat(function(){c.expire(f)||f.fire("expire")},e,d)},e)}catch(g){return r(g,arguments,this),undefined}}},uri:{getter:function(){return this._uri},setter:function(a){try{if(a!==null&&a.isEmpty())throw Error(j.error.invalidArguments);switch(!0){case this._uri===a:return;case this.uri!==null:this.uri.un("expire","dataSync"),c.expire(this.uri,!0);default:this._uri=a}switch(!0){case a!==null:this.uri.on("expire",function(){this.sync(!0)},"dataSync",this),c.expire(a,!0),this.sync();break;default:this.clear(!0)}}catch(b){return r(b,arguments,this),undefined}}}};e=o.object(e),a.genId(e);switch(!0){case typeof e.fire=="undefined":e.fire=function(b,c){return a.fire.call(this,b,c)};case typeof e.listeners=="undefined":e.listeners=function(b){return a.listeners.call(this,b)};case typeof e.on=="undefined":e.on=function(b,c,d,e,f){return a.on.call(this,b,c,d,e,f)};case typeof e.un=="undefined":e.un=function(b,c){return a.un.call(this,b,c)}}e.fire("beforeDataStore"),e.data=a.extend(this.methods),e.data.parentNode=e,e.data.clear(),e.on("syncDataDelete",function(a){var b=this.get(a.record);return this.records.remove(a.record),delete this.keys[a.key],this.total--,this.views={},a.reindex&&this.reindex(),this.parentNode.fire("afterDataDelete",b),this.parentNode},o.guid(!0),e.data),e.on("syncDataSet",function(a){var c;switch(!0){case typeof a.record=="undefined":var d=this.total;this.total++;if(typeof a.key=="undefined"){if(typeof a.result=="undefined")throw this.fire("failedDataSet"),Error(j.error.expectedObject);a.key=this.key===null?b.cast(a.result).first():a.result[this.key],a.key=a.key.toString()}typeof a.data[a.key]!="undefined"&&(a.key=a.data[a.key]),this.keys[a.key]={},this.keys[a.key].index=d,this.records[d]={},c=this.records[d],c.data=o.clone(a.data),c.key=a.key,this.key!==null&&this.records[d].data.hasOwnProperty(this.key)&&delete this.records[d].data[this.key];break;default:a.record.data=o.clone(a.data),c=a.record}this.views={},this.parentNode.fire("afterDataSet",c)},o.guid(!0),e.data);switch(!0){case(!d.ie||d.version>8)&&typeof Object.defineProperty=="function":Object.defineProperty(e.data,"uri",{get:g.uri.getter,set:g.uri.setter}),Object.defineProperty(e.data,"expires",{get:g.expires.getter,set:g.expires.setter});break;case typeof e.data.__defineGetter__=="function":e.data.__defineGetter__("expires",g.expires.getter),e.data.__defineSetter__("expires",g.expires.setter),e.data.__defineGetter__("uri",g.uri.getter),e.data.__defineSetter__("uri",g.uri.setter);break;default:e.data.setExpires=function(a){e.data.expires=a,g.expires.setter.call(e.data,a)},e.data.setUri=function(a){e.data.uri=a,g.uri.setter.call(e.data,a)}}return typeof f=="object"&&e.data.batch("set",f),e.fire("afterDataStore"),e}},g={klass:function(a,b,c){try{if(a instanceof Array)return a.each(function(a){g.klass(a,b,c)});a=o.object(a),c=c!==!1;if(a instanceof Element&&!String(b).isEmpty()){a.fire("beforeClassChange");var e=a.className.split(" "),f=e.length,h;switch(!0){case c:e.index(b)<0&&e.push(b);break;case!c:b==="*"?e=[]:e.remove(b)}return e=e.join(" "),d.ie&&d.version<9?a.className=e:a.setAttribute("class",e),a.fire("afterClassChange"),a}throw Error(j.error.invalidArguments)}catch(i){return r(i,arguments,this),undefined}},clear:function(a){try{if(a instanceof Array)return a.each(function(a){g.clear(a)});a=o.object(a);if(a instanceof Element){a.fire("beforeClear");switch(!0){case typeof a.reset=="function":a.reset();break;case typeof a.value!="undefined":a.update({innerHTML:"",value:""});break;default:a.update({innerHTML:""})}return a.fire("afterClear"),a}throw Error(j.error.invalidArguments)}catch(b){return r(b,arguments,this),undefined}},create:function(b,c,d,e){try{if(typeof b=="undefined"||String(b).isEmpty())throw Error(j.error.invalidArguments);var f,g;switch(!0){case typeof d!="undefined":d=o.object(d);break;case typeof c!="undefined"&&(typeof c=="string"||typeof c.childNodes!="undefined"):d=o.object(c);break;default:d=document.body}if(typeof d=="undefined")throw Error(j.error.invalidArguments);g=typeof c!="undefined"&&typeof c!="string"&&typeof c.childNodes=="undefined"&&typeof c.id!="undefined"&&typeof a("#"+c.id)=="undefined"?c.id:o.genId(),typeof c!="undefined"&&typeof c.id!="undefined"&&delete c.id,a.fire("beforeCreate",g),g.fire("beforeCreate"),f=document.createElement(b),f.id=g,typeof c=="object"&&typeof c.childNodes=="undefined"&&f.update(c);switch(!0){case typeof e=="undefined":case e==="last":d.appendChild(f);break;case e==="first":d.prependChild(f);break;case typeof e.after!="undefined":d.insertBefore(f,e.after.nextSibling);break;case typeof e.before!="undefined":d.insertBefore(f,e.before);break;default:d.appendChild(f)}return f.fire("afterCreate"),a.fire("afterCreate",f),f}catch(h){return r(h,arguments,this),undefined}},css:function(b){var c,d;return c=a.create("style",{type:"text/css"},a("head")[0]),c.styleSheet?c.styleSheet.cssText=b:(d=document.createTextNode(b),c.appendChild(d)),c},destroy:function(b){try{if(b instanceof Array){var c=isNaN(b.length)?b.total():b.length;while(c--)this.destroy(b[c]);return b}b=o.object(b);if(b instanceof Element)a.fire("beforeDestroy",b),b.fire("beforeDestroy"),m.remove(b.id),b.parentNode!==null&&b.parentNode.removeChild(b),b.fire("afterDestroy"),a.fire("afterDestroy",b.id);else throw Error(j.error.invalidArguments)}catch(d){r(d,arguments,this)}return undefined},disable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.disable(a[b]);return a}a=o.object(a);if(a instanceof Element)return typeof a.disabled=="boolean"&&!a.disabled&&(a.fire("beforeDisable"),a.disabled=!0,a.fire("afterDisable")),a;throw Error(j.error.invalidArguments)}catch(c){return r(c,arguments,this),undefined}},enable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.enable(a[b]);return a}a=o.object(a);if(a instanceof Element)return typeof a.disabled=="boolean"&&a.disabled&&(a.fire("beforeEnable"),a.disabled=!1,a.fire("afterEnable")),a;throw Error(j.error.invalidArguments)}catch(c){return r(c,arguments,this),undefined}},hide:function(a){try{if(a instanceof Array)return a.each(function(a){g.hide(a)});a=o.object(a);if(a instanceof Element){a.fire("beforeHide");switch(!0){case typeof a.hidden=="boolean":a.hidden=!0;break;default:a["data-display"]=a.style.display,a.style.display="none"}return a.fire("afterHide"),a}throw Error(j.error.invalidArguments)}catch(b){return r(b,arguments,this),undefined}},hidden:function(a){try{a=o.object(a);if(a instanceof Element)return a.style.display==="none"||typeof a.hidden=="boolean"&&a.hidden;throw Error(j.error.invalidArguments)}catch(b){return r(b,arguments,this),undefined}},position:function(a){try{a=o.object(a);if(a instanceof Element){var b,c,d,e;b=c=0,e=a.offsetWidth,d=a.offsetHeight;if(a.offsetParent){c=a.offsetTop,b=a.offsetLeft;while(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop}return{top:c,right:document.documentElement.clientWidth-(b+e),bottom:document.documentElement.clientHeight+window.scrollY-(c+d),left:b}}throw Error(j.error.invalidArguments)}catch(f){return r(f,arguments,this),undefined}},prependChild:function(a,b){try{a=o.object(a);if(a instanceof Element&&b instanceof Element)return a.childNodes.length===0?a.appendChild(b):a.insertBefore(b,a.childNodes[0]);throw Error(j.error.invalidArguments)}catch(c){return r(c,arguments,this),undefined}},show:function(a){try{if(a instanceof Array)return a.each(function(a){g.show(a)});a=o.object(a);if(a instanceof Element){a.fire("beforeShow");switch(!0){case typeof a.hidden=="boolean":a.hidden=!1;break;default:a.style.display=typeof a["data-display"]!="undefined"&&!a["data-display"].isEmpty()?a["data-display"]:"inherit"}return a.fire("afterShow"),a}throw Error(j.error.invalidArguments)}catch(b){return r(b,arguments,this),undefined}},size:function(a){try{if(a instanceof Array){var b=[];return a.each(function(a){b.push(g.size(a))}),b}a=o.object(a);if(a instanceof Element){var c=function(a){return isNaN(parseInt(a))?0:parseInt(a)},d=a.offsetHeight+c(a.style.paddingTop)+c(a.style.paddingBottom)+c(a.style.borderTop)+c(a.style.borderBottom),e=a.offsetWidth+c(a.style.paddingLeft)+c(a.style.paddingRight)+c(a.style.borderLeft)+c(a.style.borderRight);return{x:d,y:e}}throw Error(j.error.invalidArguments)}catch(f){return r(f,arguments,this),undefined}},update:function(a,b){try{a=o.object(a),b=b||{};if(a instanceof Array)return a.each(function(a){g.update(a,b)});if(a instanceof Element){a.fire("beforeUpdate");var c;for(c in b){if(!b.hasOwnProperty(c))continue;switch(c){case"innerHTML":case"type":case"src":a[c]=b[c];break;case"class":b[c].isEmpty()?a.removeClass("*"):a.addClass(b[c]);break;case"id":var d=m.listeners;typeof d[a.id]!="undefined"&&(d[b[c]]=o.clone(d[a.id]),delete d[a.id]);default:a.setAttribute(c,b[c])}}return a.fire("afterUpdate"),a}throw Error(j.error.invalidArguments)}catch(e){return r(e,arguments,this),undefined}}},h={diff:function(a){try{if(typeof a!="number"||typeof this!="number")throw Error(j.error.expectedNumber);return Math.abs(this-a)}catch(b){return r(b,arguments,this),undefined}},format:function(a,b,c){try{if(typeof a!="number")throw Error(j.error.expectedNumber);a=a.toString(),b=b||",",c=c||3;var d=a.indexOf(".")>-1?"."+a.replace(/.*\./,""):"",e=a.replace(/\..*/,"").split("").reverse(),f=Math.floor(e.length/c),g=1,h,i;for(i=0;i<f;i++)h=g===1?c:c*g+(g===2?1:g-1),e.splice(h,0,b),g++;return e=e.reverse().join(""),e.charAt(0)===b&&(e=e.substring(1)),e+d}catch(k){return r(k,arguments,this),undefined}},even:function(a){return a%2===0},odd:function(a){return a%2!==0}},i={decode:function(a,b){try{return JSON.parse(a)}catch(c){return b!==!0&&r(c,arguments,this),undefined}},encode:function(a,b){try{return JSON.stringify(a)}catch(c){return b!==!0&&r(c,arguments,this),undefined}}},j={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",reset:"Reset",save:"Save",search:"Search",submit:"Submit"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",propertyNotFound:"Could not find the requested property",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI"},month:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},k={clear:function(){return a.un(window,"message")},send:function(a,b){try{return a.postMessage(b,"*"),a}catch(c){return r(c,arguments,this),undefined}},recv:function(b){return a.on(window,"message",b)}},l={enabled:!1,log:!1,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},track:function(b){var c=abaaso.mouse;switch(!0){case typeof b=="object":var e=b.pageX?b.pageX:(d.ie&&d.version<9?document.documentElement.scrollLeft:document.body.scrollLeft)+n.clientX,f=b.pageY?b.pageY:(d.ie&&d.version<9?document.documentElement.scrollTop:document.body.scrollTop)+n.clientY,g=!1;c.pos.x!==e&&(g=!0),a.mouse.prev.x=c.prev.x=Number(c.pos.x),a.mouse.pos.x=c.pos.x=e,a.mouse.diff.x=c.diff.x=c.pos.x-c.prev.x,c.pos.y!==f&&(g=!0),a.mouse.prev.y=c.prev.y=Number(c.pos.y),a.mouse.pos.y=c.pos.y=f,a.mouse.diff.y=c.diff.y=c.pos.y-c.prev.y,g&&c.log&&o.log(c.pos.x+" ["+c.diff.x+"], "+c.pos.y+" ["+c.diff.y+"]");break;case typeof b=="boolean":b?m.add(document,"mousemove",abaaso.mouse.track):m.remove(document,"mousemove"),a.mouse.enabled=c.enabled=b}return c}},m={listeners:{},log:!1,add:function(b,c,d,e,f,g){try{b=o.object(b),f=f||abaaso,g=g||"active";if(b instanceof Array)return b.each(function(a){m.add(a,c,d,e,f,g)});if(typeof e=="undefined"||!/\w/.test(e))e=o.guid(!0);var h=null,i=m.listeners,k=this.id(b),l,n;if(typeof k=="undefined"||typeof c=="undefined"||typeof d!="function")throw Error(j.error.invalidArguments);switch(!0){case typeof i[k]=="undefined":i[k]={};case typeof i[k][c]=="undefined":i[k][c]={};case typeof i[k][c].active=="undefined":i[k][c].active={};case typeof i[k][c][g]=="undefined":i[k][c][g]={}}n={fn:d,scope:f},i[k][c][g][e]=n;if(g==="active"){switch(!0){case/body|document|window/i.test(k):h=b;break;default:h=!/\//g.test(k)&&k!=="abaaso"?a("#"+k):null}l=function(a){c.indexOf("key")!==0&&(a||(a=window.event),typeof a.cancelBubble!="undefined"&&(a.cancelBubble=!0),typeof a.preventDefault=="function"&&a.preventDefault(),typeof a.stopPropagation=="function"&&a.stopPropagation()),typeof h.fire=="function"?h.fire(c,a):m.fire(b,c,a)},h!==null&&c.toLowerCase()!=="afterjsonp"&&typeof h!="undefined"&&(typeof h.addEventListener=="function"?h.addEventListener(c,l,!1):h.attachEvent("on"+c,l))}return b}catch(p){return r(p,arguments,this),undefined}},id:function(a){var b;switch(!0){case a===abaaso:b="abaaso";break;case a===document:b="document";break;case a===document.body:b="body";break;case a===window:b="window";break;default:b=typeof a.id!="undefined"?a.id:typeof a.toString=="function"?a.toString():a}return b},fire:function(b,c,d){try{b=o.object(b);if(b instanceof Array)return b.each(function(a){m.fire(b[a],c,d)});var e=this.id(b),f,g,h;if(typeof e=="undefined"||String(e).isEmpty()||typeof b=="undefined"||typeof c=="undefined")throw Error(j.error.invalidArguments);(a.observer.log||abaaso.observer.log)&&o.log("["+(new Date).toLocaleTimeString()+" - "+e+"] "+c),h=this.list(b,c).active;for(g in h)h.hasOwnProperty(g)&&h[g].fn.call(h[g].scope,d);return a.observer.fired++,b}catch(i){return r(i,arguments,this),undefined}},list:function(a,b){a=o.object(a);var c=this.listeners,d=this.id(a),e;switch(!0){case typeof c[d]=="undefined"&&typeof b=="undefined":e={};break;case typeof c[d]!="undefined"&&(typeof b=="undefined"||String(b).isEmpty()):e=c[d];break;case typeof c[d]!="undefined"&&typeof c[d][b]!="undefined":e=c[d][b];break;default:e={active:{}}}return e},remove:function(b,c,d,e){b=o.object(b),e=e||"active";if(b instanceof Array)return b.each(function(a){m.remove(a,c,d,e)});var f=null,g=m.listeners,h=this.id(b),i,j;switch(!0){case typeof h=="undefined":case typeof c=="undefined":case typeof g[h]=="undefined":case typeof g[h][c]=="undefined":return b}typeof d=="undefined"?g[h][c][e]={}:delete g[h][c][e][d];if(e==="active"){switch(!0){case/body|document|window/i.test(h):f=b;break;default:f=h.indexOf("/")===-1&&h!=="abaaso"?a("#"+h):null}j=function(a){c.indexOf("key")!==0&&(a||(a=window.event),typeof a.cancelBubble!="undefined"&&(a.cancelBubble=!0),typeof a.preventDefault=="function"&&a.preventDefault(),typeof a.stopPropagation=="function"&&a.stopPropagation()),typeof f.fire=="function"?f.fire(c):m.fire(b,c,a)},f!==null&&c.toLowerCase()!=="afterjsonp"&&typeof f!="undefined"&&(typeof f.removeEventListener=="function"?f.removeEventListener(c,j,!1):f.detachEvent("on"+c,j))}return b},state:function(b){var c=this.listeners,d=a.state.previous,e,f;for(e in c){if(!c.hasOwnProperty(e))continue;for(f in c[e]){if(!c[e].hasOwnProperty(f))continue;c[e][f][d]=c[e][f].active,c[e][f].active=c[e][f][b]||{},typeof c[e][f][b]!="undefined"&&delete c[e][f][b]}}return a.fire(b),abaaso}},o={$:function(c,d){c=c.trim(),d=d===!0,c.indexOf(",")>-1&&(c=c.explode());if(c instanceof Array){var e=[];return c.each(function(b){e.push(a(b,d))}),e}var f,g;switch(!0){case/\s|>/.test(c):g=c.split(" ").filter(function(a){if(a.trim()!==""&&a!==">")return!0}).last(),f=document[g.indexOf("#")>-1&&g.indexOf(":")===-1?"querySelector":"querySelectorAll"](c);break;case c.indexOf("#")===0&&c.indexOf(":")===-1:f=isNaN(c.charAt(1))?document.querySelector(c):document.getElementById(c.substring(1));break;case c.indexOf("#")>-1&&c.indexOf(":")===-1:f=document.querySelector(c);break;default:f=document.querySelectorAll(c)}return f!==null&&!(f instanceof Element)&&!d&&(f=b.cast(f)),f===null&&(f=undefined),f},alias:function(a,b){var c;for(c in b)(function(){var e=c,f,g;if(b.hasOwnProperty(e))switch(!0){case typeof b[e]=="function"&&(!d.ios||!(b[e]instanceof RegExp)):a[e]=b[e].bind(a[e]);break;case!(b[e]instanceof Array)&&b[e]instanceof Object&&!(b[e]instanceof RegExp):typeof a[e]=="undefined"&&(a[e]={}),o.alias(a[e],b[e]);break;default:f=function(){return b[e]},g=function(a){b[e]=a};switch(!0){case(!d.ie||d.version>8)&&typeof Object.defineProperty=="function":Object.defineProperty(a,e,{get:f,set:g});break;case typeof a.__defineGetter__=="function":a.__defineGetter__(e,f),a.__defineSetter__(e,g);break;default:a[e]=b[e]}}})();return a},clone:function(a){var b;switch(!0){case typeof a=="boolean":b=Boolean(a);break;case typeof a=="function":b=a;break;case typeof a=="number":b=Number(a);break;case typeof a=="string":b=String(a);break;case!d.ie&&a instanceof Document:b=q.decode(q.encode(a));break;case a instanceof Array:b=[].concat(a);break;case a instanceof Object:b=i.decode(i.encode(a)),typeof b=="undefined"&&(b=a);break;default:b=a}return typeof a!="undefined"&&(a.hasOwnProperty("constructor")&&(b.constructor=a.constructor),a.hasOwnProperty("prototype")&&(b.prototype=a.prototype)),b},define:function(c,d,e){c=c.split("."),e=e||this,d=d||null;if(typeof e=="undefined"||e===a)e=abaaso;var f=e,g=c.length;return c.each(function(a){var e=c.index(a),h=g,i=e+1<h&&!isNaN(parseInt(c[e+1])),j=d;isNaN(parseInt(a))||(a=parseInt(a));switch(!0){case typeof f[a]=="undefined":f[a]=i?[]:{};break;case f[a]instanceof Object&&i:f[a]=b.cast(f[a]);break;case f[a]instanceof Array&&!i:f[a]=f[a].toObject();break;default:f[a]={}}switch(!0){case e+1===h:f[a]=j;break;default:f=f[a]}}),e},defer:function(a,b){var c=o.guid(!0),d=function(){delete abaaso.timer[c],a()};return abaaso.timer[c]=setTimeout(d,b),undefined},domId:function(a){return"a"+a.replace(/-/g,"").slice(1)},error:function(b,c,d,e){if(typeof b=="undefined")return;e=e===!0;var f={arguments:c,message:typeof b.message!="undefined"?b.message:b,number:typeof b.number!="undefined"?b.number&65535:undefined,scope:d,timestamp:(new Date).toUTCString(),type:typeof b.type!="undefined"?b.type:"TypeError"};return typeof console!="undefined"&&console[e?"warn":"error"](f.message),a.error.log.push(f),a.fire("error",f),undefined},extend:function(a,b){try{if(typeof a=="undefined")throw Error(j.error.invalidArguments);typeof b=="undefined"&&(b={});var c,d,e=function(){};e.prototype=a,d=new e;for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d}catch(f){return r(f,arguments,this),undefined}},genId:function(b){switch(!0){case b instanceof Array:case b instanceof String:case typeof b=="string":case typeof b!="undefined"&&typeof b.id!="undefined"&&/\w/.test(b.id):return b}var c;do c=o.domId(o.guid(!0));while(typeof a("#"+c)!="undefined");return typeof b=="object"?(b.id=c,b):c},guid:function(a){a=a===!0;var b=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},c;return c=(b()+b()+"-"+b()+"-4"+b().substr(0,3)+"-"+b()+"-"+b()+b()+b()).toLowerCase(),a&&(c=c.replace(/-/gi,"")),c},loading:function(b){try{if(b instanceof Array)return b.each(function(a){o.loading(a)});var c=a.loading;if(c.url===null)throw Error(j.error.elementNotFound);b=o.object(b);if(typeof b=="undefined")throw Error(j.error.invalidArguments);return typeof c.image=="undefined"&&(c.image=new Image,c.image.src=c.url),b.clear(),b.create("div",{"class":"loading"}).create("img",{alt:j.common.loading,src:c.image.src}),b}catch(d){return r(d,arguments,this),undefined}},log:function(a){try{console.log(a)}catch(b){r(b,arguments,this)}return undefined},module:function(b,c){try{if(typeof a[b]!="undefined"||typeof abaaso[b]!="undefined"||!c instanceof Object)throw Error(j.error.invalidArguments);return abaaso[b]=c,a[b]={},a.alias(a[b],abaaso[b])}catch(d){return r(d,arguments,this),undefined}},object:function(b){return typeof b=="object"?b:b.toString().charAt(0)==="#"?a(b):b},proto:function(e,f){var i,k={array:{addClass:function(a){return this.each(function(b){b.addClass(a)})},contains:function(a){return b.contains(this,a)},create:function(a,b,c){return this.each(function(d){d.create(a,b,c)})},clone:function(){return o.clone(this)},css:function(a,b){return this.each(function(c){c.css(a,b)})},diff:function(a){return b.diff(this,a)},disable:function(){return this.each(function(a){a.disable()})},each:function(a){return this.forEach(a),this},enable:function(){return this.each(function(a){a.enable()})},first:function(){return b.first(this)},hide:function(){return this.each(function(a){a.hide()})},html:function(a){return this.each(function(b){b.html(a)})},index:function(a){return b.index(this,a)},indexed:function(){return b.indexed(this)},intersect:function(a){return b.intersect(this,a)},isAlphaNum:function(){var a=[];return this.each(function(b){a.push(b.isAlphaNum())}),a},isBoolean:function(){var a=[];return this.each(function(b){a.push(b.isBoolean())}),a},isDate:function(){var a=[];return this.each(function(b){a.push(b.isDate())}),a},isDomain:function(){var a=[];return this.each(function(b){a.push(b.isDomain())}),a},isEmail:function(){var a=[];return this.each(function(b){a.push(b.isEmail())}),a},isIP:function(){var a=[];return this.each(function(b){a.push(b.isIP())}),a},isInt:function(){var a=[];return this.each(function(b){a.push(b.isInt())}),a},isNumber:function(){var a=[];return this.each(function(b){a.push(b.isNumber())}),a},isPhone:function(){var a=[];return this.each(function(b){a.push(b.isPhone())}),a},isString:function(){var a=[];return this.each(function(b){a.push(b.isAlphaNum())}),a},keys:function(){return b.keys(this)},last:function(a){return b.last(this)},loading:function(){return this.each(function(a){a.loading()})},on:function(a,b,c,d,e){return this.each(function(f){f.on(a,b,c,typeof d!="undefined"?d:f,e)})},position:function(){var a=[];return this.each(function(b){a.push(b.position())}),a},remove:function(a){return b.remove(this,a)},removeClass:function(a){return this.each(function(b){b.removeClass(a)})},show:function(){return this.each(function(a){a.show()})},size:function(){var a=[];return this.each(function(b){a.push(b.size())}),a},text:function(a){return this.each(function(b){typeof b!="object"&&(b=o.object(b)),typeof b.text=="function"&&b.text(a)})},total:function(){return b.total(this)},toObject:function(){return b.toObject(this)},un:function(a,b,c){return this.each(function(d){d.un(a,b,c)})},update:function(a){return this.each(function(b){g.update(b,a)})},validate:function(){var a=[];return this.each(function(b){typeof b.validate=="function"&&a.push(b.validate())}),a}},element:{addClass:function(a){return this.genId(),g.klass(this,a,!0)},append:function(a,b){return this.genId(),g.create(a,b,this,"first")},create:function(a,b,c){return this.genId(),g.create(a,b,this,c)},css:function(a,b){var c;return this.genId(),!d.chrome&&(c=a.indexOf("-"))&&c>-1&&(a=a.replace("-",""),a=a.slice(0,c)+a.charAt(c).toUpperCase()+a.slice(c+1,a.length)),this.style[a]=b,this},disable:function(){return g.disable(this)},enable:function(){return g.enable(this)},get:function(a,b){this.fire("beforeGet");var d=c.get(a),e=o.guid(!0),f=this;return d?this.html(d.response).fire("afterGet"):a.get(function(a){f.html(a).fire("afterGet")},null,b),this},hide:function(){return this.genId(),g.hide(this)},html:function(a){return this.genId(),this.update({innerHTML:a})},isAlphaNum:function(){return this.nodeName==="FORM"?!1:p.test({alphanum:typeof this.value!="undefined"?this.value:this.innerText}).pass},isBoolean:function(){return this.nodeName==="FORM"?!1:p.test({"boolean":typeof this.value!="undefined"?this.value:this.innerText}).pass},isDate:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isDate():this.innerText.isDate()},isDomain:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isDomain():this.innerText.isDomain()},isEmail:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isEmail():this.innerText.isEmail()},isEmpty:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isEmpty():this.innerText.isEmpty()},isIP:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isIP():this.innerText.isIP()},isInt:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isInt():this.innerText.isInt()},isNumber:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isNumber():this.innerText.isNumber()},isPhone:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isPhone():this.innerText.isPhone()},isString:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isString():this.innerText.isString()},jsonp:function(a,b,c){var e=this,f=b,g;return g=function(a){var b=e,c=a,d=f,g,h,i;try{typeof d!="undefined"?(d=d.replace(/]|'|"/g,"").replace(/\./g,"[").split("["),d.each(function(a){c=c[isNaN(a)?a:parseInt(a)];if(typeof c=="undefined")throw Error(j.error.propertyNotFound)}),i=c):i=a}catch(k){i=j.error.serverError,r(k,arguments,this)}b.text(i)},d.jsonp(a,g,function(){e.text(j.error.serverError)},c),this},loading:function(){return a.loading.create(this)},on:function(b,c,d,e,f){return this.genId(),a.on.call(this,b,c,d,e,f)},prepend:function(a,b){return this.genId(),g.create(a,b,this,"first")},prependChild:function(a){return this.genId(),g.prependChild(this,a)},position:function(){return this.genId(),g.position(this)},removeClass:function(a){return this.genId(),g.klass(this,a,!1)},show:function(){return this.genId(),g.show(this)},size:function(){return this.genId(),g.size(this)},text:function(a){var b={};return this.genId(),typeof this.value!="undefined"&&(b.value=a),b.innerHTML=a,this.update(b)},un:function(b,c,d){return this.genId(),a.un.call(this,b,c,d)},update:function(a){return this.genId(),g.update(this,a)},validate:function(){return this.nodeName==="FORM"?p.test(this).pass:typeof this.value!="undefined"?!this.value.isEmpty():!this.innerText.isEmpty()}},"function":{reflect:function(){return o.reflect(this)}},number:{diff:function(a){return h.diff.call(this,a)},format:function(a,b){return h.format(this,a,b)},isEven:function(){return h.even(this)},isOdd:function(){return h.odd(this)},on:function(b,c,d,e,f){return a.on.call(this,b,c,d,e,f)},un:function(b,c,d){return a.un.call(this,b,c,d)}},shared:{clear:function(){return this.genId(),this instanceof String?this.constructor=new String(""):g.clear(this),this},destroy:function(){g.destroy(this)},fire:function(b,c){return this.genId(),a.fire.call(this,b,c)},genId:function(){return o.genId(this)},listeners:function(b){return this.genId(),a.listeners.call(this,b)}},string:{allows:function(b){return a.allows(this,b)},capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)},del:function(a,b){return d.request(this,"DELETE",a,b)},explode:function(a){if(typeof a=="undefined"||a.toString()==="")a=",";return this.split(new RegExp("\\s*"+a+"\\s*"))},get:function(a,b,c){return d.request(this,"GET",a,b,c)},isAlphaNum:function(){return p.test({alphanum:this}).pass},isBoolean:function(){return p.test({"boolean":this}).pass},isDate:function(){return p.test({date:this}).pass},isDomain:function(){return p.test({domain:this}).pass},isEmail:function(){return p.test({email:this}).pass},isEmpty:function(){return!p.test({notEmpty:this}).pass},isIP:function(){return p.test({ip:this}).pass},isInt:function(){return p.test({integer:this}).pass},isNumber:function(){return p.test({number:this}).pass},isPhone:function(){return p.test({phone:this}).pass},isString:function(){return p.test({string:this}).pass},jsonp:function(a,b,c){return d.jsonp(this,a,b,c)},post:function(a,b,c){return d.request(this,"POST",a,b,c)},put:function(a,b,c){return d.request(this,"PUT",a,b,c)},on:function(b,c,d,e,f){return a.on.call(this,b,c,d,e,f)},headers:function(a,b){return d.request(this,"HEAD",a,b)},permissions:function(){return a.permissions(this)},toCamelCase:function(){var a=this.toLowerCase().split(" "),b="",c,d;for(c=0,d=a.length;c<d;c++)b+=c===0?a[c]:String(a[c]).capitalize();return b.replace(/\W/g,"")},trim:function(){return this.replace(/^\s+|\s+$/g,"")},un:function(b,c,d){return a.un.call(this,b,c,d)}}};for(i in k[f])e.prototype[i]=k[f][i];if(f!=="function")for(i in k.shared)e.prototype[i]=k.shared[i];return e},queryString:function(a){a=a||".*";var b={},c=window.location.search.isEmpty()?null:window.location.search.replace("?",""),d;return c!==null&&(c=c.split("&"),c.each(function(a){d=a.split("=");switch(!0){case d[1].isNumber():d[1]=Number(d[1]);break;case d[1].isBoolean():d[1]=d[1]==="true"}switch(!0){case typeof b[d[0]]=="undefined":b[d[0]]=d[1];break;case!(b[d[0]]instanceof Array):b[d[0]]=[b[d[0]]];default:b[d[0]].push(d[1])}})),b},reflect:function(b){switch(!0){case typeof b=="undefined":b=this;case typeof b=="undefined":b=a}return b=b.toString().match(/function\s+\w*\s*\((.*?)\)/)[1],b!==""?b.explode():[]},repeat:function(b,c,d){d=d||o.guid(!0);var e=function(b,c,d){var e=this;b()!==!1?a.repeating[d]=setTimeout(function(){e.call(e,b,c,d)},c):delete a.repeating[d]};return e.call(e,b,c,d),d},tpl:function(c,d){try{switch(!0){case typeof c!="object":case!/object|undefined/.test(typeof d)&&typeof (d=d.charAt(0)==="#"?a(d):a(d)[0])=="undefined":throw Error(j.error.invalidArguments)}typeof d=="undefined"&&(d=a("body")[0]);var e=document.createDocumentFragment(),f;switch(!0){case c instanceof Array:c.each(function(c){a.create(b.cast(c,!0)[0],e).text(b.cast(c)[0])});break;default:for(f in c)switch(!0){case typeof c[f]=="string":a.create(f,e).text(c[f]);break;case c[f]instanceof Object:a.tpl(c[f],a.create(f,e))}}return d.appendChild(e),d}catch(g){return r(g,arguments,this),undefined}}},p={pattern:{alphanum:/^[a-zA-Z0-9]*$/,"boolean":/^(0|1|true|false)?$/,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,email:/[a-zA-Z0-9.!#$%&'*+-/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*/,ip:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.) {3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,integer:/(^-?\d\d*$)/,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,phone:/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/,string:/\w/},test:function(b){var c=!1,d=[],e=null;if(typeof b.nodeName!="undefined"&&b.nodeName==="FORM"){var f,g,h,i,j,k,l={},m,n,d=[],o={};return b.id.isEmpty()&&b.genId(),i=a("#"+b.id+" > input").concat(a("#"+b.id+" > select")),i.each(function(b){h=null,g=p.pattern[b.nodeName.toLowerCase()]?p.pattern[b.nodeName.toLowerCase()]:!b.id.isEmpty()&&p.pattern[b.id.toLowerCase()]?p.pattern[b.id.toLowerCase()]:"notEmpty";switch(!0){case/radio|checkbox/gi.test(b.type):if(b.name in o)return;j=a(b.name),m=j.length;for(k=0;k<m;k++)if(j[k].checked){h=j[k].value,o[b.name]=!0;continue}break;case/select/gi.test(b.type):h=b.options[b.selectedIndex].value;break;default:h=typeof b.value!="undefined"?b.value:b.innerText}h===null&&(h=""),l[g]=h}),n=this.test(l),n}var f;for(f in b){if(typeof f=="undefined"||typeof b[f]=="undefined"){d.push({test:f,value:b[f]}),c=!0;continue}e=b[f].charAt(0)==="#"?typeof a(b[f])!="undefined"?a(b[f]).value?a(b[f]).value:a(b[f]).innerHTML:"":b[f];switch(f){case"date":isNaN((new Date(e)).getYear())&&(d.push({test:f,value:e}),c=!0);break;case"domain":p.pattern.domain.test(e.replace(/.*\/\//,""))||(d.push({test:f,value:e}),c=!0);break;case"domainip":if(!p.pattern.domain.test(e.replace(/.*\/\//,""))||!p.pattern.ip.test(e))d.push({test:f,value:e}),c=!0;break;default:var g=typeof p.pattern[f]!="undefined"?p.pattern[f]:f;g.test(e)||(d.push({test:f,value:e}),c=!0)}}return{pass:!c,invalid:d}}},q={decode:function(a){try{if(typeof a!="string"||a.isEmpty())throw Error(j.error.invalidArguments);var b;return d.ie?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b}catch(c){return r(c,arguments,this),undefined}},encode:function(b,c){try{if(typeof b=="undefined")throw Error(j.error.invalidArguments);switch(!0){case b!==null&&typeof b.xml!="undefined":d=b.xml;break;case b instanceof Document:d=(new XMLSerializer).serializeToString(b);break;default:c=c!==!1;var d=c?"<xml>":"",e=arguments[2]===!1?!1:!0,f,g;f=function(a,b){var c="<n>v</n>";return/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g.test(b)&&(c=c.replace(/v/,"<![CDATA[v]]>")),c.replace(/n/g,a).replace(/v/,b)};switch(!0){case typeof b=="boolean":case typeof b=="number":case typeof b=="string":d+=f("item",b);break;case typeof b=="object":for(g in b)d+=a.xml.encode(b[g],typeof b[g]=="object",!1).replace(/item|xml/g,isNaN(g)?g:"item")}d+=c?"</xml>":"",e&&(d='<?xml version="1.0" encoding="UTF8"?>'+d)}return d}catch(h){return r(h,arguments,this),undefined}}},r=o.error;return{array:b,callback:{},client:{android:d.android,blackberry:d.blackberry,css3:!1,chrome:d.chrome,expire:d.expire,firefox:d.firefox,ie:d.ie,ios:d.ios,linux:d.linux,mobile:d.mobile,opera:d.opera,osx:d.osx,playbook:d.playbook,safari:d.safari,tablet:d.tablet,size:{x:0,y:0},version:0,webos:d.webos,windows:d.windows,del:function(a,b,c){return d.request(a,"DELETE",b,c)},get:function(a,b,c,e){return d.request(a,"GET",b,c,e)},headers:function(a,b,c){return d.request(a,"HEAD",b,c)},post:function(a,b,c,e){return d.request(a,"POST",b,c,e)},put:function(a,b,c,e){return d.request(a,"PUT",b,c,e)},jsonp:function(a,b,c,e){return d.jsonp(a,b,c,e)},permission:d.permission},cookie:e,data:f,el:g,json:i,label:j,loading:{create:o.loading,url:null},message:k,mouse:l,number:h,observer:{log:m.log,add:m.add,fire:m.fire,fired:0,list:m.list,remove:m.remove},state:{_current:null,header:null,previous:null},validate:p,xml:q,$:o.$,alias:o.alias,allows:d.allows,append:function(a,b,c){return c instanceof Element&&c.genId(),g.create(a,b,c,"last")},bootstrap:function(){typeof Array.prototype.filter=="undefined"&&(Array.prototype.filter=function(a){"use strict";if(this===void 0||this===null||typeof a!="function")throw Error(j.error.invalidArguments);var b=null,c=Object(this),d=c.length>>>0,e=[],f=arguments[1];val=null;for(b=0;b<d;b++)b in c&&(val=c[b],a.call(f,val,b,c)&&e.push(val));return e}),typeof Array.prototype.forEach=="undefined"&&(Array.prototype.forEach=function(a,b){"use strict";if(this===null||typeof a!="function")throw Error(j.error.invalidArguments);var c,d=0,e=Object(this),f=e.length>>>0;b&&(c=b);while(d<f){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),typeof Function.prototype.bind=="undefined"&&(Function.prototype.bind=function(a){"use strict";var b=this,c=Array.prototype.slice,d=c.call(arguments,1);return function(){return b.apply(a,d.concat(c.call(arguments)))}}),abaaso.client.size=d.size(),d.version(),d.css3(),d.tablet();if(d.ie&&d.version<8)return;a=abaaso.$.bind(a),o.alias(a,abaaso),delete a.$,delete a.bootstrap,delete a.init,delete a.data,a.fire=abaaso.fire,a.on=abaaso.on,a.un=abaaso.un,a.listeners=abaaso.listeners,abaaso.state._current=abaaso.state.current="initial",a.state._current=a.state.current=abaaso.state.current;switch(!0){case window.$===null:window.$=a;break;default:window.a$=a,abaaso.aliased="a$"}switch(!0){case d.server:abaaso.init();break;case typeof document.addEventListener=="function":document.addEventListener("DOMContentLoaded",function(){abaaso.init()},!1);break;default:abaaso.timer.init=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.init),delete abaaso.timer.init,typeof abaaso.init=="function"&&abaaso.init())},10)}},clear:g.clear,clone:o.clone,create:g.create,css:g.css,decode:i.decode,defer:o.defer,define:o.define,del:function(a,b,c){return d.request(a,"DELETE",b,c)},destroy:g.destroy,encode:i.encode,error:o.error,expire:c.clean,expires:12e4,extend:o.extend,fire:function(b,c,d){var e=typeof d!="undefined",f,g,h;f=e?b:this,g=e?c:b,h=e?d:c;if(typeof f=="undefined"||f===a)f=abaaso;return m.fire.call(m,f,g,h)},genId:o.genId,get:function(a,b,c,e){return d.request(a,"GET",b,c,e)},guid:o.guid,headers:function(a,b,c){return d.request(a,"HEAD",b,c)},hidden:g.hidden,id:"abaaso",init:function(){delete abaaso.init,delete abaaso.bootstrap,o.proto(Array,"array"),typeof Element!="undefined"&&o.proto(Element,"element"),d.ie&&d.version===8&&o.proto(HTMLDocument,"element"),o.proto(Function,"function"),o.proto(Number,"number"),o.proto(String,"string"),abaaso.constructor=abaaso,a.error.log=abaaso.error.log=[],d.server||(a.on(window,"hashchange",function(){a.fire("hash",location.hash)}),a.on(window,"resize",function(){a.client.size=abaaso.client.size=d.size(),a.fire("resize",abaaso.client.size)}));var b=function(){var b=this;a.timer.expire=setTimeout(function(){c.clean(),b.call(b)},a.expires)};b.call(b);var e,f;e=function(){return this._current},f=function(a){try{if(a===null||typeof a!="string"||this.current===a||a.isEmpty())throw Error(j.error.invalidArguments);return abaaso.state.previous=abaaso.state._current,abaaso.state._current=a,m.state(a)}catch(b){return r(b,arguments,this),undefined}};switch(!0){case(!d.ie||d.version>8)&&typeof Object.defineProperty=="function":Object.defineProperty(abaaso.state,"current",{get:e,set:f}),Object.defineProperty(a.state,"current",{get:e,set:f});break;case typeof abaaso.state.__defineGetter__=="function":abaaso.state.__defineGetter__("current",e),abaaso.state.__defineSetter__("current",f),a.state.__defineGetter__("current",e),a.state.__defineSetter__("current",f);break;default:abaaso.state.change=function(a){return abaaso.state.current=a,f.call(abaaso.state,a)},a.state.change=function(a){return abaaso.state.current=a,f.call(abaaso.state,a)}}return a.fire("init").un("init"),a.ready=!0,a.fire("ready").un("ready"),d.server?a.fire("render").un("render"):a.timer.render=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(a.timer.render),delete a.timer.render,a.fire("render").un("render"))},10),abaaso},jsonp:function(a,b,c,e){return d.jsonp(a,b,c,e)},listeners:function(b){var c=this;if(typeof c=="undefined"||c===a)c=abaaso;return m.list.call(m,c,b)},module:o.module,aliased:"$",on:function(b,c,d,e,f,g){var h=typeof d=="function",i,j,k,l,n,o;i=h?b:this,j=h?c:b,k=h?d:c,l=h?e:d,n=h?f:e,o=h?g:f;if(typeof i=="undefined"||i===a)i=abaaso;return typeof n=="undefined"&&(n=i),m.add.call(m,i,j,k,l,n,o)},permissions:d.permissions,position:g.position,post:function(a,b,c,e){return d.request(a,"POST",b,c,e)},prepend:function(a,b,c){return c instanceof Element&&c.genId(),g.create(a,b,c,"first")},put:function(a,b,c,e){return d.request(a,"PUT",b,c,e)},queryString:o.queryString,ready:!1,reflect:o.reflect,repeat:o.repeat,repeating:{},store:function(a,b){return f.register.call(f,a,b)},timer:{},tpl:o.tpl,un:function(b,c,d,e){var f=typeof d!="undefined",g,h,i,j;g=f?b:this,h=f?c:b,i=f?d:c,j=f?e:d;if(typeof g=="undefined"||g===a)g=abaaso;return m.remove.call(m,g,h,i,j)},update:g.update,version:"1.8.7"}}();typeof abaaso.bootstrap=="function"&&abaaso.bootstrap()